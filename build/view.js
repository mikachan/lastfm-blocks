(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,r=window.ReactJSXRuntime;function a({tracks:e,includeLinkToTrack:a,showTrackArtwork:s,imageStyle:c,textAlign:l}){const n=e?.length>0,o=({children:e,url:t})=>a?(0,r.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",className:"track-name",children:e}):(0,r.jsx)("span",{className:"track-name",children:e});return(0,r.jsxs)("ul",{className:`tracks-list has-text-align-${l}`,children:[!n&&(0,r.jsx)("li",{className:"no-tracks-found",children:(0,t.__)("No tracks found.","lastfm-recently-played-block")}),n&&e.map((e=>(0,r.jsxs)("li",{children:[s&&(0,r.jsx)("div",{className:`track-image ${c}`,children:(0,r.jsx)(o,{url:e.url,children:(0,r.jsx)("span",{className:"artwork",role:"img","aria-label":`${e.artist["#text"]} - ${e.name}`,style:{backgroundImage:`url(${e.image[1]["#text"]})`},children:"default"!==c&&(0,r.jsx)("span",{className:"format"})})})}),(0,r.jsxs)("div",{className:"track-info",children:[(0,r.jsx)(o,{url:e.url,children:e.name}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"artist-name",children:e.artist["#text"]})]})]},e.url)))]})}const s=document.querySelector(".wp-block-lastfm-recently-played-block-lastfm-recently-played-block"),c=(0,e.createRoot)(s),l=s.dataset,n=l.lastfmApikey,o=l.lastfmUsername,i=l.lastfmNumberoftracks,m="true"===l.lastfmIncludelinktotrack,k="true"===l.lastfmShowtrackartwork,d=l.lastfmImagestyle,u=l.lastfmTextalign;(async function(e,r,a="1"){return fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${r}&api_key=${e}&format=json&limit=${a}`).then((e=>e.json())).then((e=>{if(e.error)throw e.message;if("0"===e.recenttracks["@attr"]?.total)throw(0,t.sprintf)(
// translators: %s: Last.fm username
// translators: %s: Last.fm username
(0,t.__)('No Last.fm tracks found from user "%s".',"lastfm-recently-played-block"),r);if(e.recenttracks.track){let t=e.recenttracks.track;return e.recenttracks.track.length===parseInt(a)+1&&(t=e.recenttracks.track.slice(0,a)),t}return[]})).catch((e=>{throw e}))})(n,o,i).then((e=>{c.render((0,r.jsx)(a,{tracks:e,includeLinkToTrack:m,showTrackArtwork:k,imageStyle:d,textAlign:u}))})).catch((e=>{console.error(e)}))})();